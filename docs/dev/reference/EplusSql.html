<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Retrieve Simulation Outputs Using EnergyPlus SQLite Output File — EplusSql • eplusr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Retrieve Simulation Outputs Using EnergyPlus SQLite Output File — EplusSql" />

<meta property="og:description" content="EplusSql class wraps SQL queries that can retrieve simulation outputs using
EnergyPlus SQLite output file." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />

<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eplusr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.10.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/eplusr.html">Get started</a>
</li>
<li>
  <a href="https://github.com/hongyuanjia/eplusrIntro">Slides</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/hongyuanjia/eplusr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Retrieve Simulation Outputs Using EnergyPlus SQLite Output File</h1>
    <small class="dont-index">Source: <a href='https://github.com/hongyuanjia/eplusr/blob/master/R/sql.R'><code>R/sql.R</code></a></small>
    <div class="hidden name"><code>EplusSql.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>EplusSql</code> class wraps SQL queries that can retrieve simulation outputs using
EnergyPlus SQLite output file.</p>
    
    </div>

        
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>SQLite output is an optional output format for EnergyPlus. It will be created
if there is an object in class <code>Output:SQLite</code>. If the value of field
<code>Option</code> in class <code>Output:SQLite</code> is set to <code>"SimpleAndTabular"</code>, then
database tables related to the tabular reports will be also included.</p>
<p>There are more than 30 tables in the SQLite output file which contains all of
the data found in EnergyPlus's tabular output files, standard variable and
meter output files, plus a number of reports that are found in the
eplusout.eio output file. The full description for SQLite outputs can be
found in the EnergyPlus <em>"Output Details and Examples"</em> documentation.  Note
that all column names of tables returned have been tidied, i.e. <code>"KeyValue"</code>
becomes <code>"key_value"</code>, <code>"IsMeter"</code> becomes <code>"is_meter"</code> and etc.</p>
<p><code>EplusSql</code> class makes it possible to directly retrieve simulation results
without creating an <a href='EplusJob.html'>EplusJob</a> object. <a href='EplusJob.html'>EplusJob</a> can only get simulation
outputs after the job was successfully run before.</p>
<p>However, it should be noted that, unlike <a href='EplusJob.html'>EplusJob</a>, there is no checking on
whether the simulation is terminated or completed unsuccessfully or, the
parent Idf has been changed since last simulation. This means that you may
encounter some problems when retrieve data from an unsuccessful simulation.
It is suggested to carefully go through the <code>.err</code> file using <code><a href='read_err.html'>read_err()</a></code> to
make sure the output data in the SQLite is correct and reliable.</p>
    
    <h2 class="hasAnchor" id="usage"><a class="anchor" href="#usage"></a>Usage</h2>

    <pre>epsql &lt;- eplus_sql(sql)
epsql$path()
epsql$path_idf()
epsql$list_table()
epsql$read_table(table)
epsql$report_data_dict()
epsql$report_data(
    key_value = NULL, name = NULL, year = NULL, tz = "UTC", case = "auto", all = FALSE,
    period = NULL, month = NULL, day = NULL, hour = NULL, minute = NULL,
    interval = NULL, simulation_days = NULL, day_type = NULL, environment_name = NULL
)
job$tabular_data(report_name = NULL, report_for = NULL, table_name = NULL, column_name = NULL, row_name = NULL)
epsql$print()
print(epsql)
</pre>
    
    <h2 class="hasAnchor" id="basic-info"><a class="anchor" href="#basic-info"></a>Basic Info</h2>

    <pre>epsql &lt;- eplus_sql(sql)
epsql$path()
epsql$path_idf()
</pre>
    <p><code>$path()</code> returns the path of EnergyPlus SQLite file.</p>
<p><code>$path_idf()</code> returns the IDF file path with same name as the SQLite file in
the same folder. <code>NULL</code> is returned if no corresponding IDF is found.</p>
<p><strong>Arguments</strong>:</p><ul>
<li><p><code>epsql</code>: An <code>EplusSQL</code> object.</p></li>
<li><p><code>sql</code>: A path to an local EnergyPlus SQLite output file.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="read-tables"><a class="anchor" href="#read-tables"></a>Read Tables</h2>

    <pre>epsql$list_table()
epsql$read_table(table)
epsql$report_data_dict()
epsql$report_data(key_value = NULL, name = NULL, year = NULL, tz = "UTC",case = "auto", all = FALSE,
                  period = NULL, month = NULL, day = NULL, hour = NULL, minute = NULL,
                  interval = NULL, simulation_days = NULL, day_type = NULL, environment_name = NULL)
epsql$tabular_data(report_name = NULL, report_for = NULL, table_name = NULL, column_name = NULL, row_name = NULL)
</pre>
    <p><code>$list_table()</code> returns all available table and view names in the SQLite file.</p>
<p><code>$read_table()</code> takes a valid <code>table</code> name of those from <code>$list_table()</code> and
returns that table data in a <a href='https://www.rdocumentation.org/packages/data.table/topics/data.table'>data.table</a> format.</p>
<p><code>$report_data_dict()</code> returns a <a href='https://www.rdocumentation.org/packages/data.table/topics/data.table'>data.table</a> which
contains all information about report data. For details on the meaning of
each columns, please see "2.20.2.1 ReportDataDictionary Table" in EnergyPlus
"Output Details and Examples" documentation.</p>
<p><code>$report_data()</code> extracts the report data in a
<a href='https://www.rdocumentation.org/packages/data.table/topics/data.table'>data.table</a> using key values, variable names and
other specifications. <code>$report_data()</code> can also directly take all or subset
output from <code>$report_data_dict()</code> as input, and extract all data specified.
The returned column numbers varies depending on <code>all</code> argument.</p><ul>
<li><p><code>all</code> is <code>FALSE</code>, the returned <a href='https://www.rdocumentation.org/packages/data.table/topics/data.table'>data.table</a> has 6
columns:</p><ul>
<li><p><code>case</code>: Simulation case specified using <code>case</code> argument</p></li>
<li><p><code>datetime</code>: The date time of simulation result</p></li>
<li><p><code>key_value</code>: Key name of the data</p></li>
<li><p><code>name</code>: Actual report data name</p></li>
<li><p><code>units</code>: The data units</p></li>
<li><p><code>value</code>: The data value</p></li>
</ul></li>
<li><p><code>all</code> is <code>TRUE</code>, besides columns described above, extra columns are also
included:</p><ul>
<li><p><code>month</code>: The month of reported date time</p></li>
<li><p><code>day</code>: The day of month of reported date time</p></li>
<li><p><code>hour</code>: The hour of reported date time</p></li>
<li><p><code>minute</code>: The minute of reported date time</p></li>
<li><p><code>dst</code>: Daylight saving time indicator. Possible values: <code>0</code> and <code>1</code></p></li>
<li><p><code>interval</code>: Length of reporting interval</p></li>
<li><p><code>simulation_days</code>: Day of simulation</p></li>
<li><p><code>day_type</code>: The type of day, e.g. <code>Monday</code>, <code>Tuesday</code> and etc.</p></li>
<li><p><code>environment_name</code>: A text string identifying the environment</p></li>
<li><p><code>is_meter</code>: Whether report data is a meter data. Possible values: <code>0</code> and
<code>1</code></p></li>
<li><p><code>type</code>: Nature of data type with respect to state. Possible values: <code>Sum</code>
and <code>Avg</code></p></li>
<li><p><code>index_group</code>: The report group, e.g. <code>Zone</code>, <code>System</code></p></li>
<li><p><code>timestep_type</code>: Type of data timestep. Possible values: <code>Zone</code> and <code>HVAC System</code></p></li>
<li><p><code>reporting_frequency</code>: The reporting frequency of the variable, e.g.
<code>HVAC System Timestep</code>, <code>Zone Timestep</code>.</p></li>
<li><p><code>schedule_name</code>: Name of the the schedule that controls reporting
frequency.</p></li>
</ul></li>
</ul>
    <p>With the <code>datetime</code> column, it is quite straightforward to apply time-series
analysis on the simulation output. However, another painful thing is that
every simulation run period has its own <code>Day of Week for Start Day</code>. Randomly
setting the <code>year</code> may result in a date time series that does not have
the same start day of week as specified in the RunPeriod objects.</p>
<p>eplusr provides a simple solution for this. By setting <code>year</code> to <code>NULL</code>,
which is the default behavior, eplusr will calculate a year value (from
current year backwards) for each run period that compliances with the start
day of week restriction.</p>
<p>It is worth noting that EnergyPlus uses 24-hour clock system where 24 is only
used to denote midnight at the end of a calendar day. In EnergyPlus output,
"00:24:00" with a time interval being 15 mins represents a time period from
"00:23:45" to "00:24:00", and similarly "00:15:00" represents a time period
from "00:24:00" to "00:15:00" of the next day. This means that if current day
is Friday, day of week rule applied in schedule time period "00:23:45" to
"00:24:00" (presented as "00:24:00" in the output) is also Friday, but not
Saturday. However, if you try to get the day of week of time "00:24:00" in R,
you will get Saturday, but not Friday. This introduces inconsistency and may
cause problems when doing data analysis considering day of week value.</p>
<p><code>$tabular_data()</code> extracts the tabular data in a
<a href='https://www.rdocumentation.org/packages/data.table/topics/data.table'>data.table</a> using report, table, column and row
name specifications. The returned <a href='https://www.rdocumentation.org/packages/data.table/topics/data.table'>data.table</a> has
8 columns:</p><ul>
<li><p><code>index</code>: Tabular data index</p></li>
<li><p><code>report_name</code>: The name of the report that the record belongs to</p></li>
<li><p><code>report_for</code>: The <code>For</code> text that is associated with the record</p></li>
<li><p><code>table_name</code>: The name of the table that the record belongs to</p></li>
<li><p><code>column_name</code>: The name of the column that the record belongs to</p></li>
<li><p><code>row_name</code>: The name of the row that the record belongs to</p></li>
<li><p><code>units</code>: The units of the record</p></li>
<li><p><code>value</code>: The value of the record <strong>in string format</strong></p></li>
</ul>
    <p>For convenience, input character arguments matching in <code>$report_data()</code> and
<code>$tabular_data()</code> are <strong>case-insensitive</strong>.</p>
<p><strong>Arguments</strong></p><ul>
<li><p><code>key_value</code>: A character vector to identify key values of the data. If
<code>NULL</code>, all keys of that variable will be returned. <code>key_value</code> can also be
data.frame that contains <code>key_value</code> and <code>name</code> columns. In this case,
<code>name</code> argument in <code>$report_data()</code> is ignored. All available <code>key_value</code>
for current simulation output can be obtained using <code>$report_data_dict()</code>.
Default: <code>NULL</code>.</p></li>
<li><p><code>name</code>: A character vector to identify names of the data. If
<code>NULL</code>, all names of that variable will be returned. If <code>key_value</code> is a
data.frame, <code>name</code> is ignored. All available <code>name</code> for current simulation
output can be obtained using <code>$report_data_dict()</code>.  Default: <code>NULL</code>.</p></li>
<li><p><code>year</code>: Year of the date time in column <code>datetime</code>. If <code>NULL</code>, it
will calculate a year value that meets the start day of week restriction
for each environment. Default: <code>NULL</code>.</p></li>
<li><p><code>tz</code>: Time zone of date time in column <code>datetime</code>. Default: <code>"UTC"</code>.</p></li>
<li><p><code>case</code>: If not <code>NULL</code>, a character column will be added indicates the case
of this simulation. If <code>"auto"</code>, the name of the IDF file without extension
is used.</p></li>
<li><p><code>all</code>: If <code>TRUE</code>, extra columns are also included in the returned
<a href='https://www.rdocumentation.org/packages/data.table/topics/data.table'>data.table</a>.</p></li>
<li><p><code>period</code>: A Date or POSIXt vector used to specify which time period to
return. The year value does not matter and only month, day, hour and
minute value will be used when subsetting. If <code>NULL</code>, all time period of
data is returned. Default: <code>NULL</code>.</p></li>
<li><p><code>month</code>, <code>day</code>, <code>hour</code>, <code>minute</code>: Each is an integer vector for month, day,
hour, minute subsetting of <code>datetime</code> column when querying on the SQL
database. If <code>NULL</code>, no subsetting is performed on those components. All
possible <code>month</code>, <code>day</code>, <code>hour</code> and <code>minute</code> can be obtained using
<code>$read_table("Time")</code>.  Default: <code>NULL</code>.</p></li>
<li><p><code>interval</code>: An integer vector used to specify which interval length of
report to extract. If <code>NULL</code>, all interval will be used. Default: <code>NULL</code>.</p></li>
<li><p><code>simulation_days</code>: An integer vector to specify which simulation day data
to extract. Note that this number resets after warmup and at the beginning
of an environment period. All possible <code>simulation_days</code> can be obtained
using <code>$read_table("Time")</code>. If <code>NULL</code>, all simulation days will be used.
Default: <code>NULL</code>.</p></li>
<li><p><code>day_type</code>: A character vector to specify which day type of data to
extract. All possible day types are: <code>Sunday</code>, <code>Monday</code>, <code>Tuesday</code>,
<code>Wednesday</code>, <code>Thursday</code>, <code>Friday</code>, <code>Saturday</code>, <code>Holiday</code>,
<code>SummerDesignDay</code>, <code>WinterDesignDay</code>, <code>CustomDay1</code>, and <code>CustomDay2</code>. All
possible values for current simulation output can be obtained using
<code>$read_table("Time")</code>.</p></li>
<li><p><code>environment_name</code>: A character vector to specify which environment data to
extract. All possible <code>environment_name</code> for current simulation output can
be obtained using <code>$read_table("EnvironmentPeriods"). </code>If <code>NULL</code>, all
environment data are returned. Default: <code>NULL</code>.</p></li>
<li><p><code>report_name</code>, <code>report_for</code>, <code>table_name</code>, <code>column_name</code>, <code>row_name</code>:
Each is a character vector for subsetting when querying the SQL database.
For the meaning of each argument, please see the description above.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="print"><a class="anchor" href="#print"></a>Print</h2>

    <pre>epsql$print()
print(epsql)
</pre>
    <p><code>$print()</code> shows the core information of this <code>EplusSql</code> object, including
the path of the EnergyPlus SQLite file, last modified time of the SQLite file
and the path of the IDF file with the same name in the same folder.</p>
<p><strong>Arguments</strong></p><ul>
<li><p><code>epsql</code>: An <code>EplusSQL</code> object.</p></li>
</ul>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='kw'>if</span> (<span class='fu'><a href='use_eplus.html'>is_avail_eplus</a></span>(<span class='fl'>8.8</span>)) {
    <span class='no'>idf_name</span> <span class='kw'>&lt;-</span> <span class='st'>"1ZoneUncontrolled.idf"</span>
    <span class='no'>epw_name</span> <span class='kw'>&lt;-</span>  <span class='st'>"USA_CA_San.Francisco.Intl.AP.724940_TMY3.epw"</span>

    <span class='no'>idf_path</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/file.path'>file.path</a></span>(<span class='fu'><a href='use_eplus.html'>eplus_config</a></span>(<span class='fl'>8.8</span>)$<span class='no'>dir</span>, <span class='st'>"ExampleFiles"</span>, <span class='no'>idf_name</span>)
    <span class='no'>epw_path</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/file.path'>file.path</a></span>(<span class='fu'><a href='use_eplus.html'>eplus_config</a></span>(<span class='fl'>8.8</span>)$<span class='no'>dir</span>, <span class='st'>"WeatherData"</span>, <span class='no'>epw_name</span>)

    <span class='co'># copy to tempdir and run the model</span>
    <span class='no'>idf</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='read_idf.html'>read_idf</a></span>(<span class='no'>idf_path</span>)
    <span class='no'>idf</span>$<span class='fu'>run</span>(<span class='no'>epw_path</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/tempfile'>tempdir</a></span>())

    <span class='co'># create from local file</span>
    <span class='no'>sql</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='eplus_sql.html'>eplus_sql</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/file.path'>file.path</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/tempfile'>tempdir</a></span>(), <span class='st'>"1ZoneUncontrolled.sql"</span>))

    <span class='co'># get sql file path</span>
    <span class='no'>sql</span>$<span class='fu'>path</span>()

    <span class='co'># get the parent IDF file path</span>
    <span class='no'>sql</span>$<span class='fu'>path_idf</span>()

    <span class='co'># list all tables in the sql file</span>
    <span class='no'>sql</span>$<span class='fu'>list_table</span>()

    <span class='co'># read a specific table</span>
    <span class='no'>sql</span>$<span class='fu'>read_read</span>(<span class='st'>"Zones"</span>)

    <span class='co'># read report data dictionary</span>
    <span class='no'>sql</span>$<span class='fu'>report_data_dict</span>()

    <span class='co'># read report data</span>
    <span class='no'>sql</span>$<span class='fu'>report_data</span>(<span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"EnergyTransfer:Building"</span>)

    <span class='co'># read tabular data</span>
    <span class='no'>sql</span>$<span class='fu'>tabular_data</span>()
}
<span class='co'># }</span><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#details">Details</a></li>

      <li><a href="#usage">Usage</a></li>

      <li><a href="#basic-info">Basic Info</a></li>

      <li><a href="#read-tables">Read Tables</a></li>

      <li><a href="#print">Print</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Hongyuan Jia</p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Hongyuan Jia.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

